/* empty css              */import{_ as p,f as c,o as _,u as k,R as w,c as d,a as s,b as C,I as M,a4 as b,g as v}from"./index-DcZzwYh9.js";const h={class:"camera-page"},E={class:"navbar"},y={class:"camera-container"},P={class:"camera-circle"},U={key:0,class:"camera-placeholder"},x={__name:"CameraPage",setup(N){const i=k(),n=c(null),l=c(!1);let o=null;const m=()=>{i.go(-1)},u=()=>{i.push("/government")},t=c(""),f=async()=>{t.value="";try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){t.value="您的浏览器不支持摄像头访问功能，请使用最新版Chrome、Firefox或Safari浏览器",console.error("摄像头访问失败1:",t.value);return}const e={video:{facingMode:"user",width:{ideal:400},height:{ideal:400}},audio:!1};o=await navigator.mediaDevices.getUserMedia(e),!o&&navigator.webkitGetUserMedia&&(o=await new Promise((a,r)=>{navigator.webkitGetUserMedia(e,a,r)})),!o&&navigator.mozGetUserMedia&&(o=await new Promise((a,r)=>{navigator.mozGetUserMedia(e,a,r)})),n.value&&o&&(n.value.srcObject=o,l.value=!0)}catch(e){console.error("摄像头访问失败:",e),e.name==="NotAllowedError"||e.name==="PermissionDeniedError"?t.value="摄像头权限被拒绝，请在浏览器设置中启用摄像头权限":e.name==="NotFoundError"?t.value="未检测到可用摄像头":e.name==="NotSupportedError"?t.value="当前环境不支持摄像头访问，请使用HTTPS或localhost":t.value=`摄像头访问失败: ${e.message}`,console.error("fail",t.value)}},g=()=>{o&&(o.getTracks().forEach(e=>e.stop()),l.value=!1)};return _(async()=>{await f(),setTimeout(()=>{i.push("/certificates")},2500)}),w(()=>{g()}),(e,a)=>{const r=M;return v(),d("div",h,[s("div",E,[s("div",{class:"back-btn",onClick:m},[C(r,{name:"cross"})]),a[0]||(a[0]=s("div",{class:"title"},null,-1)),s("div",{class:"close-btn",onClick:u})]),a[2]||(a[2]=s("div",{class:"prompt-text"},"拿起手机，眨眨眼",-1)),s("div",y,[s("div",P,[s("video",{ref_key:"videoElement",ref:n,class:"camera-feed",autoplay:"",playsinline:""},null,512),l.value?b("",!0):(v(),d("div",U,a[1]||(a[1]=[s("div",{class:"camera-icon"},null,-1),s("div",{class:"loading-text"},"正在启动摄像头...",-1)])))])]),a[3]||(a[3]=s("div",{class:"action-tips"},null,-1))])}}},G=p(x,[["__scopeId","data-v-ffa650d7"]]);export{G as default};
